import{_ as u,c as h,e as g,a as o,t as c,f as _,o as r,g as v,b as f,F as b,h as k,w as C,r as d,d as P}from"./index-CoGelvCH.js";const w={props:{initialPhoto:Number,photoCount:Number,isOpen:Boolean},data(){return{currentPhoto:this.initialPhoto,isToggleActive:!1,isChanging:!1}},computed:{frontUrl(){return this.getFrontUrl(this.currentPhoto)},backUrl(){return this.getBackUrl(this.currentPhoto)}},watch:{initialPhoto(s){this.currentPhoto=s}},methods:{getFrontUrl(s){let t=`/images/photoalbum/photo_front (${s}).jpg`;return this.isToggleActive&&(t=`/images/photoalbum/photo_front_norm (${s}).jpg`),t="."+t,t},getBackUrl(s){let t=`/images/photoalbum/photo_back (${s}).jpg`;return t="."+t,t},toggle(){this.isToggleActive=!this.isToggleActive},close(){this.$emit("close")},next(){this.isChanging||this.currentPhoto<this.photoCount&&(this.currentPhoto++,this.isChanging=!0,setTimeout(()=>{this.isChanging=!1},200))},prev(){this.isChanging||this.currentPhoto>1&&(this.currentPhoto--,this.isChanging=!0,setTimeout(()=>{this.isChanging=!1},200))},handleKeydown(s){switch(s.key){case"ArrowLeft":this.prev();break;case"ArrowRight":this.next();break;case"Escape":this.close();break;case"+":this.toggle();break}}},mounted(){window.addEventListener("keydown",this.handleKeydown),document.body.style.overflow="hidden"},beforeUnmount(){window.removeEventListener("keydown",this.handleKeydown),document.body.style.overflow=""}},y={class:"modal-content"},M=["title"],x={class:"photo-navigation"},T=["disabled"],U=["disabled"],O={class:"photo-pair"},A={class:"photo-side photo-front"},B=["src","alt"],N={class:"photo-side photo-back"},V=["src","alt"],j={class:"photo-info"};function E(s,t,a,p,n,e){return a.isOpen?(r(),h("div",{key:0,class:"modal",onClick:t[4]||(t[4]=_((...i)=>e.close&&e.close(...i),["self"]))},[o("div",y,[o("span",{class:"toggle",onClick:t[0]||(t[0]=(...i)=>e.toggle&&e.toggle(...i)),title:n.isToggleActive?"Выключить режим":"Включить режим"},c(n.isToggleActive?"◼":"◻"),9,M),o("span",{class:"close",onClick:t[1]||(t[1]=(...i)=>e.close&&e.close(...i))},"×"),o("div",x,[o("button",{onClick:t[2]||(t[2]=(...i)=>e.prev&&e.prev(...i)),disabled:n.currentPhoto===1,class:"nav-btn nav-prev"},"<",8,T),o("button",{onClick:t[3]||(t[3]=(...i)=>e.next&&e.next(...i)),disabled:n.currentPhoto===a.photoCount,class:"nav-btn nav-next"}," > ",8,U)]),o("div",O,[o("div",A,[o("img",{src:e.frontUrl,alt:`Фото ${n.currentPhoto} (перед)`},null,8,B),t[5]||(t[5]=o("div",{class:"side-label"},"Лицевая сторона",-1))]),o("div",N,[o("img",{src:e.backUrl,alt:`Фото ${n.currentPhoto} (зад)`},null,8,V),t[6]||(t[6]=o("div",{class:"side-label"},"Оборотная сторона",-1))])]),o("div",j,[o("p",null,"Фото "+c(n.currentPhoto)+" из "+c(a.photoCount),1)])])])):g("",!0)}const F=u(w,[["render",E],["__scopeId","data-v-8b7cea3e"]]),L={name:"PhotoalbumView",components:{PhotoModal:F},data(){return{photoCount:74,isModalOpen:!1,currentPhoto:1}},methods:{getThumbnailUrl(s){return`./images/photoalbum/photo_mini (${s}).jpg`},openModal(s){this.currentPhoto=s,this.isModalOpen=!0},closeModal(){this.isModalOpen=!1}}},K={class:"photo-grid"},I=["onClick"],D=["src","alt"];function R(s,t,a,p,n,e){const i=d("PhotoModal"),m=d("router-link");return r(),h("div",null,[t[1]||(t[1]=o("h1",null,"Фотоальбом",-1)),o("div",K,[(r(!0),h(b,null,k(n.photoCount,l=>(r(),h("div",{key:l,class:"photo-item",onClick:S=>e.openModal(l)},[o("img",{src:e.getThumbnailUrl(l),alt:`Фото ${l}`},null,8,D),o("p",null,"Фото "+c(l),1)],8,I))),128))]),n.isModalOpen?(r(),v(i,{key:0,initialPhoto:n.currentPhoto,photoCount:n.photoCount,isOpen:n.isModalOpen,onClose:e.closeModal},null,8,["initialPhoto","photoCount","isOpen","onClose"])):g("",!0),f(m,{to:{name:"home"}},{default:C(()=>t[0]||(t[0]=[P("На главную")])),_:1,__:[0]})])}const z=u(L,[["render",R],["__scopeId","data-v-16630654"]]);export{z as default};
